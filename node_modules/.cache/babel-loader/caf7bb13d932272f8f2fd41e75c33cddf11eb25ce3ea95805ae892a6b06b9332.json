{"ast":null,"code":"let initialState = {\n  dialogsData: [{\n    id: 1,\n    name: 'Керим'\n  }, {\n    id: 2,\n    name: 'Ильяс'\n  }, {\n    id: 3,\n    name: 'Ибраим'\n  }, {\n    id: 4,\n    name: 'Ахмад'\n  }, {\n    id: 5,\n    name: 'Аким'\n  }],\n  messagesData: [{\n    id: 1,\n    message: 'Hello, how are you?'\n  }, {\n    id: 2,\n    message: 'Hi, i`m good'\n  }],\n  newMessage: ''\n};\nconst messagesReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  // \n  let stateCopy = {\n    ...state\n  }; // Сообщения могут отправляться без субскрайбера в index.js\n\n  let spaceCounter = 0;\n  let letterCounter = 0;\n  switch (action.type) {\n    case 'UPDATE-MESSAGE-TEXT':\n      let newTextWithoutParagraph = '';\n      for (let i of action.newMessageText) {\n        if (i !== \"\\n\") {\n          newTextWithoutParagraph += i;\n        }\n      }\n      stateCopy.newMessage = newTextWithoutParagraph;\n      return stateCopy;\n    case 'ADD-MESSAGE':\n      stateCopy.messagesData = [...state.messagesData];\n      let newMessage = {\n        id: 3,\n        message: state.newMessage\n      };\n      console.log(newMessage.message);\n      for (let l of newMessage.message) {\n        letterCounter += 1;\n        if (l === ' ') {\n          spaceCounter += 1;\n        } else if (l === \"\\n\") {\n          spaceCounter += 1;\n        }\n      }\n      if (letterCounter !== spaceCounter && letterCounter >= 1) {\n        stateCopy.messagesData.push(newMessage);\n      }\n      stateCopy.newMessage = '';\n      return stateCopy;\n    case 'ADD-PARAGRAPH':\n      stateCopy.newMessage += \"\\n\";\n      return stateCopy;\n    default:\n      return state;\n  }\n};\nexport let newMessageActionCreator = newText => ({\n  type: 'UPDATE-MESSAGE-TEXT',\n  newMessageText: newText\n});\nexport let addMessageActionCreator = () => ({\n  type: 'ADD-MESSAGE'\n});\nexport let addParagrapgh = () => ({\n  type: 'ADD-PARAGRAPH'\n});\nexport default messagesReducer;","map":{"version":3,"names":["initialState","dialogsData","id","name","messagesData","message","newMessage","messagesReducer","state","arguments","length","undefined","action","stateCopy","spaceCounter","letterCounter","type","newTextWithoutParagraph","i","newMessageText","console","log","l","push","newMessageActionCreator","newText","addMessageActionCreator","addParagrapgh"],"sources":["C:/Users/Kerim/Desktop/F-end/frontend/react/react-project/react-2/src/redux/messages-reducer.js"],"sourcesContent":["let initialState = {\r\n\tdialogsData: [\r\n\t\t{ id: 1, name: 'Керим' },\r\n\t\t{ id: 2, name: 'Ильяс' },\r\n\t\t{ id: 3, name: 'Ибраим' },\r\n\t\t{ id: 4, name: 'Ахмад' },\r\n\t\t{ id: 5, name: 'Аким' },\r\n\t],\r\n\tmessagesData: [\r\n\t\t{ id: 1, message: 'Hello, how are you?' },\r\n\t\t{ id: 2, message: 'Hi, i`m good' },\r\n\t],\r\n\tnewMessage: ''\r\n};\r\nconst messagesReducer = (state = initialState, action) => { // \r\n\tlet stateCopy = {...state} // Сообщения могут отправляться без субскрайбера в index.js\r\n\r\n\tlet spaceCounter = 0;\r\n\tlet letterCounter = 0;\r\n\tswitch (action.type) {\r\n\t\tcase 'UPDATE-MESSAGE-TEXT':\r\n\t\t\tlet newTextWithoutParagraph = '';\r\n\t\t\tfor(let i of action.newMessageText){\r\n\t\t\t\tif(i !== \"\\n\"){\r\n\t\t\t\t\tnewTextWithoutParagraph += i;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tstateCopy.newMessage = newTextWithoutParagraph;\r\n\t\t\treturn stateCopy;\r\n\r\n\t\tcase 'ADD-MESSAGE':\r\n\t\t\tstateCopy.messagesData = [...state.messagesData]\r\n\t\t\tlet newMessage = {\r\n\t\t\t\tid: 3,\r\n\t\t\t\tmessage: state.newMessage,\r\n\t\t\t}\r\n\t\t\tconsole.log(newMessage.message)\r\n\t\t\tfor(let l of newMessage.message){\r\n\t\t\t\tletterCounter += 1;\r\n\t\t\t\tif (l === ' '){\r\n\t\t\t\t\tspaceCounter += 1;\r\n\t\t\t\t} else if (l === \"\\n\"){\r\n\t\t\t\t\tspaceCounter += 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (letterCounter !== spaceCounter && letterCounter >= 1){\r\n\t\t\t\tstateCopy.messagesData.push(newMessage);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tstateCopy.newMessage = '';\r\n\r\n\t\t\treturn stateCopy;\r\n\t\t\t\r\n\r\n\t\t\tcase 'ADD-PARAGRAPH':\r\n\t\t\t\tstateCopy.newMessage += \"\\n\";\r\n\t\t\t\treturn stateCopy;\r\n\t\t\t\t\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n\r\n\r\nexport let newMessageActionCreator = (newText) => ({\r\n\ttype: 'UPDATE-MESSAGE-TEXT',\r\n\tnewMessageText: newText,\r\n})\r\nexport let addMessageActionCreator = () => ({\r\n\ttype: 'ADD-MESSAGE',\r\n})\r\n\r\nexport let addParagrapgh = () =>({\r\n\ttype: 'ADD-PARAGRAPH'\r\n})\r\n\r\nexport default messagesReducer;"],"mappings":"AAAA,IAAIA,YAAY,GAAG;EAClBC,WAAW,EAAE,CACZ;IAAEC,EAAE,EAAE,CAAC;IAAEC,IAAI,EAAE;EAAQ,CAAC,EACxB;IAAED,EAAE,EAAE,CAAC;IAAEC,IAAI,EAAE;EAAQ,CAAC,EACxB;IAAED,EAAE,EAAE,CAAC;IAAEC,IAAI,EAAE;EAAS,CAAC,EACzB;IAAED,EAAE,EAAE,CAAC;IAAEC,IAAI,EAAE;EAAQ,CAAC,EACxB;IAAED,EAAE,EAAE,CAAC;IAAEC,IAAI,EAAE;EAAO,CAAC,CACvB;EACDC,YAAY,EAAE,CACb;IAAEF,EAAE,EAAE,CAAC;IAAEG,OAAO,EAAE;EAAsB,CAAC,EACzC;IAAEH,EAAE,EAAE,CAAC;IAAEG,OAAO,EAAE;EAAe,CAAC,CAClC;EACDC,UAAU,EAAE;AACb,CAAC;AACD,MAAMC,eAAe,GAAG,SAAAA,CAAA,EAAkC;EAAA,IAAjCC,KAAK,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAGT,YAAY;EAAA,IAAEY,MAAM,GAAAH,SAAA,CAAAC,MAAA,OAAAD,SAAA,MAAAE,SAAA;EAAO;EAC3D,IAAIE,SAAS,GAAG;IAAC,GAAGL;EAAK,CAAC,EAAC;;EAE3B,IAAIM,YAAY,GAAG,CAAC;EACpB,IAAIC,aAAa,GAAG,CAAC;EACrB,QAAQH,MAAM,CAACI,IAAI;IAClB,KAAK,qBAAqB;MACzB,IAAIC,uBAAuB,GAAG,EAAE;MAChC,KAAI,IAAIC,CAAC,IAAIN,MAAM,CAACO,cAAc,EAAC;QAClC,IAAGD,CAAC,KAAK,IAAI,EAAC;UACbD,uBAAuB,IAAIC,CAAC;QAC7B;MACD;MACAL,SAAS,CAACP,UAAU,GAAGW,uBAAuB;MAC9C,OAAOJ,SAAS;IAEjB,KAAK,aAAa;MACjBA,SAAS,CAACT,YAAY,GAAG,CAAC,GAAGI,KAAK,CAACJ,YAAY,CAAC;MAChD,IAAIE,UAAU,GAAG;QAChBJ,EAAE,EAAE,CAAC;QACLG,OAAO,EAAEG,KAAK,CAACF;MAChB,CAAC;MACDc,OAAO,CAACC,GAAG,CAACf,UAAU,CAACD,OAAO,CAAC;MAC/B,KAAI,IAAIiB,CAAC,IAAIhB,UAAU,CAACD,OAAO,EAAC;QAC/BU,aAAa,IAAI,CAAC;QAClB,IAAIO,CAAC,KAAK,GAAG,EAAC;UACbR,YAAY,IAAI,CAAC;QAClB,CAAC,MAAM,IAAIQ,CAAC,KAAK,IAAI,EAAC;UACrBR,YAAY,IAAI,CAAC;QAClB;MACD;MACA,IAAIC,aAAa,KAAKD,YAAY,IAAIC,aAAa,IAAI,CAAC,EAAC;QACxDF,SAAS,CAACT,YAAY,CAACmB,IAAI,CAACjB,UAAU,CAAC;MACxC;MAEAO,SAAS,CAACP,UAAU,GAAG,EAAE;MAEzB,OAAOO,SAAS;IAGhB,KAAK,eAAe;MACnBA,SAAS,CAACP,UAAU,IAAI,IAAI;MAC5B,OAAOO,SAAS;IAElB;MACC,OAAOL,KAAK;EACd;AACD,CAAC;AAGD,OAAO,IAAIgB,uBAAuB,GAAIC,OAAO,KAAM;EAClDT,IAAI,EAAE,qBAAqB;EAC3BG,cAAc,EAAEM;AACjB,CAAC,CAAC;AACF,OAAO,IAAIC,uBAAuB,GAAGA,CAAA,MAAO;EAC3CV,IAAI,EAAE;AACP,CAAC,CAAC;AAEF,OAAO,IAAIW,aAAa,GAAGA,CAAA,MAAM;EAChCX,IAAI,EAAE;AACP,CAAC,CAAC;AAEF,eAAeT,eAAe"},"metadata":{},"sourceType":"module","externalDependencies":[]}