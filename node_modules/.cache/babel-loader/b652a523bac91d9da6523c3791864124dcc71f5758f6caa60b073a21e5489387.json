{"ast":null,"code":"let initialState = {\n  dialogsData: [{\n    id: 1,\n    name: 'Керим'\n  }, {\n    id: 2,\n    name: 'Ильяс'\n  }, {\n    id: 3,\n    name: 'Ибраим'\n  }, {\n    id: 4,\n    name: 'Ахмад'\n  }, {\n    id: 5,\n    name: 'Аким'\n  }],\n  messagesData: [{\n    id: 1,\n    message: 'Hello, how are you?'\n  }, {\n    id: 2,\n    message: 'Hi, i`m good'\n  }],\n  newMessage: ''\n};\nconst messagesReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  // \n  let stateCopy = {\n    ...state\n  }; // Сообщения могут отправляться без субскрайбера в index.js\n\n  let spaceCounter = 0;\n  let letterCounter = 0;\n  switch (action.type) {\n    case 'UPDATE-MESSAGE-TEXT':\n      let newTextWithParagraph = '';\n      for (let i of action.newMessageText) {\n        newTextWithParagraph += i;\n      }\n      if (action.paragraph) {\n        newTextWithParagraph += \"\\n\";\n      }\n      stateCopy.newMessage = newTextWithParagraph;\n      console.log(newMessage.message);\n      return stateCopy;\n    case 'ADD-MESSAGE':\n      stateCopy.messagesData = [...state.messagesData];\n      let newMessage = {\n        id: 3,\n        message: state.newMessage\n      };\n      for (let l of newMessage.message) {\n        letterCounter += 1;\n        if (l === ' ') {\n          spaceCounter += 1;\n        } else if (l === \"\\n\") {\n          spaceCounter += 1;\n        }\n      }\n      if (letterCounter !== spaceCounter && letterCounter >= 1) {\n        stateCopy.messagesData.push(newMessage);\n      }\n      stateCopy.newMessage = '';\n      return stateCopy;\n    default:\n      return state;\n  }\n};\nexport let newMessageActionCreator = (newText, paragraph) => ({\n  type: 'UPDATE-MESSAGE-TEXT',\n  newMessageText: newText,\n  paragraph: paragraph\n});\nexport let addMessageActionCreator = () => ({\n  type: 'ADD-MESSAGE'\n});\nexport default messagesReducer;","map":{"version":3,"names":["initialState","dialogsData","id","name","messagesData","message","newMessage","messagesReducer","state","arguments","length","undefined","action","stateCopy","spaceCounter","letterCounter","type","newTextWithParagraph","i","newMessageText","paragraph","console","log","l","push","newMessageActionCreator","newText","addMessageActionCreator"],"sources":["C:/Users/Kerim/Desktop/F-end/frontend/react/react-project/react-2/src/redux/messages-reducer.js"],"sourcesContent":["let initialState = {\r\n\tdialogsData: [\r\n\t\t{ id: 1, name: 'Керим' },\r\n\t\t{ id: 2, name: 'Ильяс' },\r\n\t\t{ id: 3, name: 'Ибраим' },\r\n\t\t{ id: 4, name: 'Ахмад' },\r\n\t\t{ id: 5, name: 'Аким' },\r\n\t],\r\n\tmessagesData: [\r\n\t\t{ id: 1, message: 'Hello, how are you?' },\r\n\t\t{ id: 2, message: 'Hi, i`m good' },\r\n\t],\r\n\tnewMessage: ''\r\n};\r\nconst messagesReducer = (state = initialState, action) => { // \r\n\tlet stateCopy = {...state} // Сообщения могут отправляться без субскрайбера в index.js\r\n\r\n\tlet spaceCounter = 0;\r\n\tlet letterCounter = 0;\r\n\tswitch (action.type) {\r\n\t\tcase 'UPDATE-MESSAGE-TEXT':\r\n\t\t\tlet newTextWithParagraph = '';\r\n\t\t\tfor(let i of action.newMessageText){\r\n\t\t\t\t\tnewTextWithParagraph += i;\r\n\t\t\t}\r\n\t\t\tif(action.paragraph){\r\n\t\t\t\tnewTextWithParagraph += \"\\n\"\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tstateCopy.newMessage = newTextWithParagraph;\r\n\t\t\tconsole.log(newMessage.message)\r\n\t\t\t\r\n\t\t\treturn stateCopy;\r\n\r\n\t\tcase 'ADD-MESSAGE':\r\n\t\t\tstateCopy.messagesData = [...state.messagesData]\r\n\t\t\tlet newMessage = {\r\n\t\t\t\tid: 3,\r\n\t\t\t\tmessage: state.newMessage,\r\n\t\t\t}\r\n\t\t\r\n\t\t\tfor(let l of newMessage.message){\r\n\t\t\t\tletterCounter += 1;\r\n\t\t\t\tif (l === ' '){\r\n\t\t\t\t\tspaceCounter += 1;\r\n\t\t\t\t} \r\n\t\t\t\telse if (l === \"\\n\"){\r\n\t\t\t\t\tspaceCounter += 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (letterCounter !== spaceCounter && letterCounter >= 1){\r\n\t\t\t\t\r\n\t\t\t\tstateCopy.messagesData.push(newMessage);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tstateCopy.newMessage = '';\r\n\r\n\t\t\treturn stateCopy;\r\n\t\t\t\r\n\r\n\t\t\r\n\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n\r\n\r\nexport let newMessageActionCreator = (newText, paragraph) => ({\r\n\ttype: 'UPDATE-MESSAGE-TEXT',\r\n\tnewMessageText: newText,\r\n\tparagraph: paragraph,\r\n})\r\nexport let addMessageActionCreator = () => ({\r\n\ttype: 'ADD-MESSAGE',\r\n})\r\n\r\n\r\n\r\nexport default messagesReducer;"],"mappings":"AAAA,IAAIA,YAAY,GAAG;EAClBC,WAAW,EAAE,CACZ;IAAEC,EAAE,EAAE,CAAC;IAAEC,IAAI,EAAE;EAAQ,CAAC,EACxB;IAAED,EAAE,EAAE,CAAC;IAAEC,IAAI,EAAE;EAAQ,CAAC,EACxB;IAAED,EAAE,EAAE,CAAC;IAAEC,IAAI,EAAE;EAAS,CAAC,EACzB;IAAED,EAAE,EAAE,CAAC;IAAEC,IAAI,EAAE;EAAQ,CAAC,EACxB;IAAED,EAAE,EAAE,CAAC;IAAEC,IAAI,EAAE;EAAO,CAAC,CACvB;EACDC,YAAY,EAAE,CACb;IAAEF,EAAE,EAAE,CAAC;IAAEG,OAAO,EAAE;EAAsB,CAAC,EACzC;IAAEH,EAAE,EAAE,CAAC;IAAEG,OAAO,EAAE;EAAe,CAAC,CAClC;EACDC,UAAU,EAAE;AACb,CAAC;AACD,MAAMC,eAAe,GAAG,SAAAA,CAAA,EAAkC;EAAA,IAAjCC,KAAK,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAGT,YAAY;EAAA,IAAEY,MAAM,GAAAH,SAAA,CAAAC,MAAA,OAAAD,SAAA,MAAAE,SAAA;EAAO;EAC3D,IAAIE,SAAS,GAAG;IAAC,GAAGL;EAAK,CAAC,EAAC;;EAE3B,IAAIM,YAAY,GAAG,CAAC;EACpB,IAAIC,aAAa,GAAG,CAAC;EACrB,QAAQH,MAAM,CAACI,IAAI;IAClB,KAAK,qBAAqB;MACzB,IAAIC,oBAAoB,GAAG,EAAE;MAC7B,KAAI,IAAIC,CAAC,IAAIN,MAAM,CAACO,cAAc,EAAC;QACjCF,oBAAoB,IAAIC,CAAC;MAC3B;MACA,IAAGN,MAAM,CAACQ,SAAS,EAAC;QACnBH,oBAAoB,IAAI,IAAI;MAC7B;MAEAJ,SAAS,CAACP,UAAU,GAAGW,oBAAoB;MAC3CI,OAAO,CAACC,GAAG,CAAChB,UAAU,CAACD,OAAO,CAAC;MAE/B,OAAOQ,SAAS;IAEjB,KAAK,aAAa;MACjBA,SAAS,CAACT,YAAY,GAAG,CAAC,GAAGI,KAAK,CAACJ,YAAY,CAAC;MAChD,IAAIE,UAAU,GAAG;QAChBJ,EAAE,EAAE,CAAC;QACLG,OAAO,EAAEG,KAAK,CAACF;MAChB,CAAC;MAED,KAAI,IAAIiB,CAAC,IAAIjB,UAAU,CAACD,OAAO,EAAC;QAC/BU,aAAa,IAAI,CAAC;QAClB,IAAIQ,CAAC,KAAK,GAAG,EAAC;UACbT,YAAY,IAAI,CAAC;QAClB,CAAC,MACI,IAAIS,CAAC,KAAK,IAAI,EAAC;UACnBT,YAAY,IAAI,CAAC;QAClB;MACD;MACA,IAAIC,aAAa,KAAKD,YAAY,IAAIC,aAAa,IAAI,CAAC,EAAC;QAExDF,SAAS,CAACT,YAAY,CAACoB,IAAI,CAAClB,UAAU,CAAC;MACxC;MAEAO,SAAS,CAACP,UAAU,GAAG,EAAE;MAEzB,OAAOO,SAAS;IAKjB;MACC,OAAOL,KAAK;EACd;AACD,CAAC;AAGD,OAAO,IAAIiB,uBAAuB,GAAGA,CAACC,OAAO,EAAEN,SAAS,MAAM;EAC7DJ,IAAI,EAAE,qBAAqB;EAC3BG,cAAc,EAAEO,OAAO;EACvBN,SAAS,EAAEA;AACZ,CAAC,CAAC;AACF,OAAO,IAAIO,uBAAuB,GAAGA,CAAA,MAAO;EAC3CX,IAAI,EAAE;AACP,CAAC,CAAC;AAIF,eAAeT,eAAe"},"metadata":{},"sourceType":"module","externalDependencies":[]}